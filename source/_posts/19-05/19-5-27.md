---
title: 小程序左滑显示删除功能
date: 2019-05-30 15:29:13
categories: 
- 小程序
---

### 思路

1. 采用分层思想，每个item分为上下两层，上面一层放内容，下面一层放删除按钮

2. 上面一层采用绝对定位，下面一层放到需要显示的位置，通过动态设置right属性的值，来实现向左滑动漏出下面的删除按钮

3. 通过touchstart，touchmove 这几个事件来判断滑动的方向，从而设置right的值

<!--more-->
### 在需要滑动的item上注册事件
```
<view class='address-list' bindtouchstart='touchStart' bindtouchmove='touchMove'>

</view>
```

### js

```

data:{
    movedel:{
      clientStart:'',//滑动开始的位置
      clientMove:'',//滑动的位置
      stydel:'0rpx',//内容初始的right距离
      delWidth: 80 //露出删除按钮的宽度
    }
}


// 开始滑动
  touchStart(e){
    let start = "movedel.clientStart"
    this.setData({
      [start]: e.touches[0].clientX
    })
  },
  // 滑动
  touchMove(e){
    let move = 'movedel.clientMove'
    this.setData({
      [move]: e.touches[0].clientX
    })
    let distance = this.data.movedel.clientStart - this.data.movedel.clientMove
    let right = 'movedel.stydel'
    if(distance<=0){//右滑
      this.setData({
        [right]:'0rpx'
      })
    }
    if (distance > this.data.movedel.delWidth){ //左滑
      this.setData({
        [right]: '80rpx'
      })
    }
  },
```